[alias]
  branch-do-each = "!f() { if [ $# -lt 3 ]; then echo 'Usage: git branch-do-each <branch> <num_commits> <command>'; exit 1; fi; BRANCH=$1; shift; NUM_BACK=$1; shift; while [ $NUM_BACK -gt 0 ]; do git checkout $BRANCH~$NUM_BACK && $@ || exit 1; let NUM_BACK=NUM_BACK-1; done; git checkout $BRANCH && $@ || exit 1; }; f"
  branch-test-each = "!f() { git branch-do-each $1 $2 \"`git config alias-settings.test-command`\"; }; f"
[alias-settings]
  test-command = "rspec"
